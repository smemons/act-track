<p-tabView (onChange)="handleChange($event)">
    <p-tabPanel header="Schedule View">
        <div class="row">
            <div class="col-lg-12 col-md-12">
                <p-panel header="Activities Scheduler" [toggleable]="true">
                    <ul class="legend">
                        <li *ngFor="let status of statuses"><span [ngStyle]="{'background-color': status.colorCode}"></span>{{status.title}}</li>
                    </ul>
                    <div class="clearfix"></div>
                    <p-schedule [events]="events" [height]="600" [header]="headerConfig" [editable]="true" (onEventClick)="handleEventClick($event)"></p-schedule>
                </p-panel>
            </div>
        </div>
        <p-dialog #aTaskDialog header="Create Task" [(visible)]="taskDialog" [responsive]="true" showEffect="fade" [modal]="true" [width]="300">
            <app-task [activityId]="activity._id" (taskChanged)="taskCreated($event)" (taskClosed)="taskClosed($event)"></app-task>
        </p-dialog>
        <p-dialog #aDialog header="Activity Details" [(visible)]="dialogVisible" [responsive]="true" showEffect="fade" [modal]="true" [width]="500" [height]="500">
            <div class="ui-grid ui-grid-responsive ui-fluid" *ngIf="activity">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4"><label for="title">Title</label></div>
                    <div class="ui-grid-col-8"><input pInputText id="title" [(ngModel)]="activity.title" /></div>
                </div>
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4"><label for="desc">Description</label></div>
                    <div class="ui-grid-col-8"><textarea id="desc" pInputTextarea [(ngModel)]="activity.desc"></textarea></div>
                </div>
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4"><label for="category">Category</label></div>
                    <div class="ui-grid-col-8">
                        {{selectedCategory}}
                    </div>
                </div>

                <div class="ui-grid-row">
                    <div class="ui-grid-col-4"><label for="startDate">Start Date</label></div>
                    <div class="ui-grid-col-8">
                        <!--<p-calendar disabled="true" [appendTo]="aDialog" name="startDate" [icon]="true" [(ngModel)]="activity.startDate" dateFormat="mm/dd/yy" dataType="string"></p-calendar>-->
                        {{activity.startDate|date}}
                    </div>
                </div>
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4"><label for="endDate">End Date</label></div>
                    <div class="ui-grid-col-8">
                        {{activity.endDate|date}}
                        <!--<p-calendar disabled="true" [appendTo]="aDialog" name="endDate" [icon]="true" [(ngModel)]="activity.endDate" dateFormat="mm/dd/yy" dataType="string"></p-calendar>-->
                    </div>
                </div>
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4"><label for="status">Completion(%)</label></div>
                    <div class="ui-grid-col-8">
                        <input type="text" pInputText [(ngModel)]="activity.percentage" style="width:200px" />
                        <p-slider [(ngModel)]="activity.percentage" [style]="{'width':'200px'}"></p-slider>
                    </div>
                </div>
                <br>
                <div class="ui-grid-row">
                    <div class="ui-grid-col-4"><label for="status">Status</label></div>
                    <div class="ui-grid-col-8">

                        <!--<p-dropdown name="status" [appendTo]="aDialog" inputId="status" [options]="listStatuses" [(ngModel)]="activity.statusId" required></p-dropdown>-->
                        <p-selectButton [style]="{'font-size':'x-small'}" name="status" inputId="status" [options]="listStatuses" [(ngModel)]="activity.statusId" #status="ngModel" required></p-selectButton>
                    </div>
                </div>

                <div class="ui-grid-row">
                    <div class="ui-grid-col-4"><label for="assignee">Assignee</label></div>
                    <div class="ui-grid-col-8">
                        <!--<p-listbox name="assignee" [options]="assignees" [(ngModel)]="activity.assignee" multiple="multiple" checkbox="checkbox" filter="filter" #assignee="ngModel" required>
                </p-listbox>-->
                        {{activity.assignee}}

                    </div>
                </div>

            </div>
            <p-footer>
                <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">

                    <button [disabled]="!isWriter" type="button" pButton icon="fa-check" (click)="updateActivity(activity)" label="Save"></button>
                    <button type="button" pButton icon="fa-close" (click)="close()" label="Cancel"></button>
                    <button type="button" class="pull-left btn-primary btn-lg" (click)="showDetail(activity._id)" label="Detail">Detail</button>
                </div>
                <div class="clearfix"></div>
                <button type="button" class="pull-right btn-info btn-lg" style="margin-right: 10px;" (click)="createTask()" label="Detail">Create Task</button>
            </p-footer>
        </p-dialog>

    </p-tabPanel>
    <p-tabPanel header="Activities View">
        <app-listActivities></app-listActivities>
    </p-tabPanel>
    <p-tabPanel header="Activity Tree">
        <app-tree></app-tree>
    </p-tabPanel>
</p-tabView>